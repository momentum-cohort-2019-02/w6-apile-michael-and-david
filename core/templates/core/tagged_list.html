{% extends 'base.html' %}

{% block content %}
  <div class="flex flex-column">  
    {% for post in posts %}
    <div class=" bw5 b--moon-gray shadow-5 bg-white  bl br3   mr2  ml7 mr7 gray w-70  h-50 shadow-5  "> 
        <div class="flex justify-between">
            <a class="helvetica link:link link dim black-90 dib mr3 f3 fw9 bb bw3 b--blue shadow-5" href="{{ post.url }}"><p>{{ post.title }}</p></a>
            {% if request.user.is_authenticated %}
                <form action="{% url 'favorite_post' slug=post.slug %}" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="next" value="{{ request.path }}">
                    <button type="submit" class="mt3 mr3">
                        {% if request.user in post.liked_by.all %}
                        Unfavorite
                        {% else %}
                        Favorite
                        {% endif %}
                    </button>  
                </form>
            {% endif %}
        </div>
        <code class="helvetica lh-copy dark-red"><p>Posted By: 
            <a href="{% url 'profile_page' username=post.author.username %}">{{ post.author }}</a>
        </p></code>
        <code class="helvetica f5 lh-solid b--dark-gray  ">{{ post.description}}</code>
        <code class="helvetica dark-red"><h4>{{ post.date_added }}</h4></code>
        <a class="helvetica link:link link dim dib mr3 lh-copy" href="{{ post.get_absolute_url }}
        "><h4>Reply</h4></a>
    </div>
    <br>
    <br>
    <br>
    {% endfor %}
  </div>
{% endblock %}